myApp.controller("BankController",["$http","$location","bankService",function($http,$location,bankService){vm=this,console.log("checking user"),vm.bank=[],$http.get("/user").then(function(response){response.data.username?(vm.userName=response.data.username,vm.firstName=response.data.firstname,console.log("User Data: ",vm.userName),bankService.getUserBankTransactions(vm.userName).then(function(){vm.bank=bankService.bank,vm.calcBalance(vm.bank)})):$location.path("/home")}),vm.calcBalance=function(array){for(vm.balance=0,i=0;i<=array.length-1;i++)"deposit"==array[i].transaction?vm.balance=vm.balance+parseInt(array[i].amount):vm.balance=vm.balance-parseInt(array[i].amount);return console.log("BankController balance:",vm.balance),vm.balance},vm.logout=function(){$http.get("/user/logout").then(function(response){console.log("logged out"),$location.path("/home")})}}]);