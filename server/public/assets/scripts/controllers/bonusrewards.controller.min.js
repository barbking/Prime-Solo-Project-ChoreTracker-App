myApp.controller("BonusRewardsController",["$http","$location","bookService","$uibModal","$log",function($http,$location,bookService,$uibModal,$log){vm=this,vm.books=bookService.books,bookService.getBooks(),vm.logout=function(){$http.get("/user/logout").then(function(response){console.log("logged out"),$location.path("/home")})},vm.addReward=function(book,size,parentSelector){var parentElem=parentSelector?angular.element($document[0].querySelector(".add-reward-modal"+parentSelector)):void 0;$uibModal.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"addRewardModalContent.html",controller:"addRewardModalInstanceCtrl",controllerAs:"armic",size:size,appendTo:parentElem,resolve:{book:function(){return book}}})}}]),myApp.controller("addRewardModalInstanceCtrl",["$uibModalInstance","$uibModal","$log","bookService","book","bankService",function($uibModalInstance,$uibModal,$log,bookService,book,bankService){vm=this,vm.books=bookService.books,vm.username=book.username,vm.title=book.title,vm.pages=book.pages,vm.level=book.level,vm.book_id=book._id,vm.addReward=function(){if(vm.reward){var itemToSend={reward:vm.reward,book_id:vm.book_id},depositToSend={username:book.username,amount:vm.reward,date:vm.date,comment:"Book Reward:  "+vm.title,transaction:"deposit"};console.log(itemToSend),bookService.updateBook(itemToSend),bankService.saveTransaction(depositToSend),swal({title:"Reward Added!",type:"success",timer:3500,confirmButtonText:"Ok"}),$uibModalInstance.close()}else console.log("inputs empty"),swal({title:"Empty Fields!",text:"Please enter reward!",type:"error",timer:3500,confirmButtonText:"Ok"})},vm.cancel=function(){$uibModalInstance.close()}}]);