myApp.controller("UserBookLogController",["$http","$location","bookService","$uibModal","$log",function($http,$location,bookService,$uibModal,$log){vm=this,vm.userbooks=bookService.userbooks,console.log("controller",vm.userbooks),$http.get("/user").then(function(response){response.data.username?(vm.firstname=response.data.firstname,vm.username=response.data.username,console.log("get user response: ",response.data),bookService.getUserBooks().then(function(){vm.userbooks=bookService.userbooks,console.log("get userbooks:",vm.userbooks)})):$location.path("/home")}),vm.logout=function(){$http.get("/user/logout").then(function(response){console.log("logged out"),$location.path("/home")})},vm.addBook=function(size,parentSelector){var parentElem=parentSelector?angular.element($document[0].querySelector(".add-book-modal"+parentSelector)):void 0;$uibModal.open({animation:!0,ariaLabelledBy:"modal-title",ariaDescribedBy:"modal-body",templateUrl:"addBookModalContent.html",controller:"addBookModalInstanceCtrl",controllerAs:"abmic",size:size,appendTo:parentElem,resolve:{}})},vm.delete=function(id){swal({title:"Are you sure?",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, delete it!",closeOnConfirm:!1},function(){swal("Deleted!","success"),console.log("in delete book controller"),bookService.deleteBook(id),bookService.getUserBooks().then(function(){vm.userbooks=bookService.userbooks,console.log("get userbooks:",vm.userbooks)})})}}]),myApp.controller("addBookModalInstanceCtrl",["$uibModalInstance","$uibModal","$log","bookService",function($uibModalInstance,$uibModal,$log,bookService){vm=this,vm.addNewBook=function(){if(vm.title&&vm.author&&vm.pages&&vm.level&&vm.summary&&vm.date){var itemToSend={title:vm.title,author:vm.author,pages:vm.pages,level:vm.level,summary:vm.summary,date:vm.date};console.log(itemToSend),bookService.addBook(itemToSend),swal({title:"Book Added!",text:"Today a reader, tomorrow a leader.",imageUrl:"/views/images/thumbs-up.png",timer:3500,confirmButtonText:"Ok"}),$uibModalInstance.close()}else console.log("inputs empty"),swal({title:"Empty Fields!",text:"Please enter all fields!",type:"error",timer:3500,confirmButtonText:"Ok"})},vm.cancel=function(){$uibModalInstance.close()}}]);