myApp.service("tasksService",["$http",function($http){var vm=this;vm.tasks=[],vm.usertasks=[],vm.getTasks=function(){return console.log("in getTasks http request"),$http({method:"GET",url:"/tasks"}).then(function(response){return vm.tasks=response.data,console.log("vm.task:",vm.tasks),vm.tasks})},vm.saveTask=function(task){return console.log("task to save is:",task),$http({method:"POST",url:"/tasks/update",data:task}).then(function(response){console.log(response),vm.getTasks()})},vm.deleteTask=function(id){return console.log("in deleteTask"),console.log("deleteTask:",id),$http({method:"DELETE",url:"/tasks/"+id}).then(function(response){return console.log(response),vm.tasks=response.data,vm.tasks})},vm.getUserTasks=function(username){return console.log("in getTasks http request with username:",username),$http({method:"GET",url:"/tasks/"+username}).then(function(response){return console.log("getUserTask post db response:",response),vm.usertasks=response.data,console.log("vm.usertasks from getUserTask:",vm.usertasks),vm.usertasks})},vm.updateTasks=function(task){console.log("in updateTask http request:",task),counter=0;for(var key in task)limit=task.frequency,console.log("limit:",limit),!0===task[key]&&counter<limit&&(counter+=1),task.checkboxcount=counter,console.log(task.checkboxcount);return $http({method:"POST",url:"/tasks/checkbox",data:task}).then(function(response){console.log(response)})},vm.resetTasks=function(user){return console.log("in resetTask http request:",user),resetAllObj={username:user,count:0,sun:!1,mon:!1,tues:!1,wed:!1,thur:!1,fri:!1,sat:!1},console.log("resetAllObj=>",resetAllObj),$http({method:"POST",url:"/tasks/reset",data:resetAllObj}).then(function(response){console.log(response)})}}]);